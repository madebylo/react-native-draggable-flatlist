{"version":3,"names":["AnimatedScrollView","Animated","createAnimatedComponent","ScrollView","NestableScrollContainerInner","props","useSafeNestableScrollContainerContext","outerScrollOffset","containerSize","scrollViewSize","scrollableRef","outerScrollEnabled","onScroll","useAnimatedScrollHandler","contentOffset","value","y","onLayout","useStableCallback","event","layout","nativeEvent","height","onContentSizeChange","w","h","NestableScrollContainer","React","forwardRef","forwardedRef","undefined"],"sources":["NestableScrollContainer.tsx"],"sourcesContent":["import React from \"react\";\nimport { LayoutChangeEvent, ScrollViewProps } from \"react-native\";\nimport { ScrollView } from \"react-native-gesture-handler\";\nimport Animated, { useAnimatedScrollHandler } from \"react-native-reanimated\";\nimport {\n  NestableScrollContainerProvider,\n  useSafeNestableScrollContainerContext,\n} from \"../context/nestableScrollContainerContext\";\nimport { useStableCallback } from \"../hooks/useStableCallback\";\n\nconst AnimatedScrollView = Animated.createAnimatedComponent(ScrollView);\n\nfunction NestableScrollContainerInner(props: ScrollViewProps) {\n  const {\n    outerScrollOffset,\n    containerSize,\n    scrollViewSize,\n    scrollableRef,\n    outerScrollEnabled,\n  } = useSafeNestableScrollContainerContext();\n\n  const onScroll = useAnimatedScrollHandler({\n    onScroll: ({ contentOffset }) => {\n      outerScrollOffset.value = contentOffset.y;\n    },\n  });\n\n  const onLayout = useStableCallback((event: LayoutChangeEvent) => {\n    const {\n      nativeEvent: { layout },\n    } = event;\n    containerSize.value = layout.height;\n  });\n\n  const onContentSizeChange = useStableCallback((w: number, h: number) => {\n    scrollViewSize.value = h;\n    props.onContentSizeChange?.(w, h);\n  });\n\n  return (\n    <AnimatedScrollView\n      {...props}\n      onLayout={onLayout}\n      onContentSizeChange={onContentSizeChange}\n      scrollEnabled={outerScrollEnabled}\n      ref={scrollableRef}\n      scrollEventThrottle={1}\n      onScroll={onScroll}\n    />\n  );\n}\n\nexport const NestableScrollContainer = React.forwardRef(\n  (props: ScrollViewProps, forwardedRef?: React.ForwardedRef<ScrollView>) => {\n    return (\n      <NestableScrollContainerProvider\n        forwardedRef={\n          (forwardedRef as React.MutableRefObject<ScrollView>) || undefined\n        }\n      >\n        <NestableScrollContainerInner {...props} />\n      </NestableScrollContainerProvider>\n    );\n  }\n);\n"],"mappings":"mQAAA,oDAEA,uEACA,uFACA,yFAIA,6D,qpCAEA,GAAMA,mBAAkB,CAAGC,8BAAA,CAASC,uBAAT,CAAiCC,qCAAjC,CAA3B,CAEA,QAASC,6BAAT,CAAsCC,KAAtC,CAA8D,CAC5D,0BAMI,GAAAC,qEAAA,GANJ,CACEC,iBADF,uBACEA,iBADF,CAEEC,aAFF,uBAEEA,aAFF,CAGEC,cAHF,uBAGEA,cAHF,CAIEC,aAJF,uBAIEA,aAJF,CAKEC,kBALF,uBAKEA,kBALF,CAQA,GAAMC,SAAQ,CAAG,GAAAC,+CAAA,EAAyB,CACxCD,QAAQ,oCAAyB,IAApBE,cAAoB,MAApBA,aAAoB,CAC/BP,iBAAiB,CAACQ,KAAlB,CAA0BD,aAAa,CAACE,CAAxC,CACD,CAFO,gCAlBVT,iBAkBU,iVADgC,CAAzB,CAAjB,CAMA,GAAMU,SAAQ,CAAG,GAAAC,oCAAA,EAAkB,SAACC,KAAD,CAA8B,CAC/D,GACiBC,OADjB,CAEID,KAFJ,CACEE,WADF,CACiBD,MADjB,CAGAZ,aAAa,CAACO,KAAd,CAAsBK,MAAM,CAACE,MAA7B,CACD,CALgB,CAAjB,CAOA,GAAMC,oBAAmB,CAAG,GAAAL,oCAAA,EAAkB,SAACM,CAAD,CAAYC,CAAZ,CAA0B,CACtEhB,cAAc,CAACM,KAAf,CAAuBU,CAAvB,CACApB,KAAK,CAACkB,mBAAN,cAAAlB,KAAK,CAACkB,mBAAN,CAA4BC,CAA5B,CAA+BC,CAA/B,EACD,CAH2B,CAA5B,CAKA,MACE,8BAAC,kBAAD,0BACMpB,KADN,EAEE,QAAQ,CAAEY,QAFZ,CAGE,mBAAmB,CAAEM,mBAHvB,CAIE,aAAa,CAAEZ,kBAJjB,CAKE,GAAG,CAAED,aALP,CAME,mBAAmB,CAAE,CANvB,CAOE,QAAQ,CAAEE,QAPZ,6EADF,CAWD,CAEM,GAAMc,wBAAuB,CAAGC,cAAA,CAAMC,UAAN,CACrC,SAACvB,KAAD,CAAyBwB,YAAzB,CAA2E,CACzE,MACE,8BAAC,+DAAD,EACE,YAAY,CACTA,YAAD,EAAwDC,SAF5D,6EAKE,6BAAC,4BAAD,0BAAkCzB,KAAlC,+EALF,CADF,CASD,CAXoC,CAAhC,C"}